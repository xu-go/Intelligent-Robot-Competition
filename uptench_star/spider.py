#串口通讯
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
import uptech
import time
from up_controller import UpController


if __name__ == '__main__':
    up=uptech.UpTech()
    up_controller=UpController()
    up.ADC_IO_Open()
    up.LCD_Open(2)
    up.ADC_Led_SetColor(0,0x07E0)
    up.ADC_Led_SetColor(1,0x07E0)
    up.LCD_PutString(10, 0, 'uptech_spider')
    up.LCD_Refresh()
    up.CDS_Open()
    io_data = []
    servo_ids = [1,2,3,4,5,6,7,8,9,10]
    up_controller.set_cds_mode(servo_ids,0)  #设置舵机为舵机模式
    up.CDS_SetAngle(1, 512, 512)
    up.CDS_SetAngle(2, 190, 512)
    up.CDS_SetAngle(3, 512, 512)
    up.CDS_SetAngle(4, 190, 512)
    up.CDS_SetAngle(5, 512, 512)
    up.CDS_SetAngle(6, 190, 512)
    up.CDS_SetAngle(7, 512, 512)
    up.CDS_SetAngle(8, 190, 512)
    up.CDS_SetAngle(9, 512, 512)
    up.CDS_SetAngle(10, 512, 512)
    time.sleep(1)
    while True:
##获取左右红外光电传感器数值
        io_all_input = up.ADC_IO_GetAllInputLevel()
        io_array = '{:08b}'.format(io_all_input)                #获取光电的信息
        io_data.clear()
        for index, value in enumerate(io_array):                #枚举内置的函数
            io = (int)(value)     
            io_data.insert(0,io)  
        if io_data[0]==1 and io_data[1]==1:   #前进
            up.ADC_Led_SetColor(0,0X0000)
            up.ADC_Led_SetColor(1,0X0000)
            up.CDS_SetAngle(1, 640, 512)
            up.CDS_SetAngle(2, 195, 512)
            up.CDS_SetAngle(3, 349, 512)
            up.CDS_SetAngle(4, 196, 1023)
            up.CDS_SetAngle(5, 559, 512)
            up.CDS_SetAngle(6, 190, 512)
            up.CDS_SetAngle(7, 475, 512)
            up.CDS_SetAngle(8, 189, 512)
            up.CDS_SetAngle(9, 512, 512)
            up.CDS_SetAngle(10, 312, 512)
            time.sleep(0.3)
    
            up.CDS_SetAngle(1, 340, 908)
            up.CDS_SetAngle(2, 512, 960)
            up.CDS_SetAngle(3, 383, 300)
            up.CDS_SetAngle(4, 196, 300)
            up.CDS_SetAngle(5, 459, 302)
            up.CDS_SetAngle(6, 190, 300)
            up.CDS_SetAngle(7, 375, 302)
            up.CDS_SetAngle(8, 189, 300)
            up.CDS_SetAngle(9, 512, 300)
            up.CDS_SetAngle(10, 712, 900)
            time.sleep(0.3)
    
            up.CDS_SetAngle(1, 340, 300)
            up.CDS_SetAngle(2, 195, 960)
            up.CDS_SetAngle(3, 449, 300)
            up.CDS_SetAngle(5, 459, 300)
            up.CDS_SetAngle(7, 375, 300)
            up.CDS_SetAngle(10, 312, 900)
            time.sleep(0.3)
    
            up.CDS_SetAngle(1, 440, 302)
            up.CDS_SetAngle(2, 195, 300)
            up.CDS_SetAngle(3, 549, 302)
            up.CDS_SetAngle(5, 359, 302)
            up.CDS_SetAngle(7, 675, 908)
            up.CDS_SetAngle(8, 512, 978)
            up.CDS_SetAngle(10, 712, 900)
            time.sleep(0.3)
    
            up.CDS_SetAngle(1, 440, 300)
            up.CDS_SetAngle(3, 549, 300)
            up.CDS_SetAngle(5, 359, 300)
            up.CDS_SetAngle(7, 675, 300)
            up.CDS_SetAngle(8, 189, 978)
            up.CDS_SetAngle(10, 312, 900)
            time.sleep(0.3)
    
            up.CDS_SetAngle(1, 540, 302)
            up.CDS_SetAngle(3, 649, 302)
            up.CDS_SetAngle(5, 659, 908)
            up.CDS_SetAngle(6, 512, 975)
            up.CDS_SetAngle(7, 623, 300)
            up.CDS_SetAngle(8, 189, 300)
            up.CDS_SetAngle(10, 712, 900)
            time.sleep(0.3)
    
            up.CDS_SetAngle(1, 540, 300)
            up.CDS_SetAngle(3, 649, 300)
            up.CDS_SetAngle(5, 659, 300)
            up.CDS_SetAngle(6, 190, 975)
            up.CDS_SetAngle(7, 575, 300)
            up.CDS_SetAngle(10, 312, 900)
            time.sleep(0.3)
    
            up.CDS_SetAngle(1, 640, 302)
            up.CDS_SetAngle(3, 349, 908)
            up.CDS_SetAngle(4, 512, 956)
            up.CDS_SetAngle(5, 559, 302)
            up.CDS_SetAngle(6, 190, 300)
            up.CDS_SetAngle(7, 475, 302)
            up.CDS_SetAngle(10, 712, 900)
            time.sleep(0.3)
        elif io_data[0]==0 and io_data[1]==0:    #后退
            up.ADC_Led_SetColor(0,0xF800)
            up.ADC_Led_SetColor(1,0XF800)
            up.CDS_SetAngle(1, 440, 512)
            up.CDS_SetAngle(2, 195, 512)
            up.CDS_SetAngle(3, 649, 512)
            up.CDS_SetAngle(4, 196, 512)
            up.CDS_SetAngle(5, 359, 512)
            up.CDS_SetAngle(6, 190, 1023)
            up.CDS_SetAngle(7, 675, 512)
            up.CDS_SetAngle(8, 189, 512)
            up.CDS_SetAngle(9, 512, 512)
            up.CDS_SetAngle(10, 512, 512)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 340, 302)
            up.CDS_SetAngle(2, 195, 300)
            up.CDS_SetAngle(3, 580, 300)
            up.CDS_SetAngle(4, 196, 300)
            up.CDS_SetAngle(5, 459, 302)
            up.CDS_SetAngle(6, 190, 300)
            up.CDS_SetAngle(7, 375, 908)
            up.CDS_SetAngle(8, 512, 978)
            up.CDS_SetAngle(9, 512, 300)
            up.CDS_SetAngle(10, 512, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 340, 300)
            up.CDS_SetAngle(5, 459, 300)
            up.CDS_SetAngle(7, 375, 300)
            up.CDS_SetAngle(8, 189, 978)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 640, 908)
            up.CDS_SetAngle(2, 512, 960)
            up.CDS_SetAngle(3, 449, 396)
            up.CDS_SetAngle(5, 559, 302)
            up.CDS_SetAngle(7, 475, 302)
            up.CDS_SetAngle(8, 189, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 640, 300)
            up.CDS_SetAngle(2, 195, 960)
            up.CDS_SetAngle(3, 449, 300)
            up.CDS_SetAngle(5, 559, 300)
            up.CDS_SetAngle(7, 475, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 602, 300)
            up.CDS_SetAngle(2, 195, 300)
            up.CDS_SetAngle(3, 749, 908)
            up.CDS_SetAngle(4, 512, 956)
            up.CDS_SetAngle(5, 659, 302)
            up.CDS_SetAngle(7, 522, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(3, 749, 300)
            up.CDS_SetAngle(4, 196, 956)
            up.CDS_SetAngle(5, 659, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 440, 490)
            up.CDS_SetAngle(3, 649, 302)
            up.CDS_SetAngle(4, 196, 300)
            up.CDS_SetAngle(5, 359, 908)
            up.CDS_SetAngle(6, 512, 975)
            up.CDS_SetAngle(7, 675, 463)
            
            time.sleep(0.3)
        elif io_data[0]==0:                   #左转
            up.ADC_Led_SetColor(0,0xF800)
            up.ADC_Led_SetColor(1,0X0000)
            up.CDS_SetAngle(1, 540, 512)
            up.CDS_SetAngle(2, 195, 512)
            up.CDS_SetAngle(3, 749, 512)
            up.CDS_SetAngle(4, 196, 512)
            up.CDS_SetAngle(5, 459, 512)
            up.CDS_SetAngle(6, 190, 512)
            up.CDS_SetAngle(7, 375, 512)
            up.CDS_SetAngle(8, 189, 1023)
            up.CDS_SetAngle(9, 512, 512)
            up.CDS_SetAngle(10, 512, 512)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 640, 302)
            up.CDS_SetAngle(2, 195, 300)
            up.CDS_SetAngle(3, 449, 908)
            up.CDS_SetAngle(4, 512, 956)
            up.CDS_SetAngle(5, 559, 302)
            up.CDS_SetAngle(6, 190, 300)
            up.CDS_SetAngle(7, 475, 302)
            up.CDS_SetAngle(8, 189, 300)
            up.CDS_SetAngle(9, 512, 300)
            up.CDS_SetAngle(10, 512, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 640, 300)
            up.CDS_SetAngle(3, 449, 300)
            up.CDS_SetAngle(4, 196, 956)
            up.CDS_SetAngle(5, 559, 300)
            up.CDS_SetAngle(7, 475, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 340, 908)
            up.CDS_SetAngle(2, 512, 960)
            up.CDS_SetAngle(3, 549, 302)
            up.CDS_SetAngle(4, 196, 300)
            up.CDS_SetAngle(7, 675, 605)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 340, 300)
            up.CDS_SetAngle(2, 195, 960)
            up.CDS_SetAngle(3, 549, 300)
            up.CDS_SetAngle(7, 675, 300)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 440, 302)
            up.CDS_SetAngle(2, 195, 300)
            up.CDS_SetAngle(3, 649, 302)
            up.CDS_SetAngle(5, 359, 605)
            up.CDS_SetAngle(6, 512, 975)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 440, 300)
            up.CDS_SetAngle(3, 649, 300)
            up.CDS_SetAngle(5, 359, 300)
            up.CDS_SetAngle(6, 190, 975)
            
            time.sleep(0.3)
            up.CDS_SetAngle(1, 540, 302)
            up.CDS_SetAngle(3, 749, 302)
            up.CDS_SetAngle(5, 459, 302)
            up.CDS_SetAngle(6, 190, 300)
            up.CDS_SetAngle(7, 375, 908)
            up.CDS_SetAngle(8, 512, 978)
            
            time.sleep(0.3) 
        else:                                 #右转
            up.ADC_Led_SetColor(0,0x0000)
            up.ADC_Led_SetColor(1,0XF800)
            up.CDS_SetAngle(1, 540, 512)
            up.CDS_SetAngle(2, 195, 1023)
            up.CDS_SetAngle(3, 749, 512)
            up.CDS_SetAngle(4, 196, 512)
            up.CDS_SetAngle(5, 459, 512)
            up.CDS_SetAngle(6, 190, 512)
            up.CDS_SetAngle(7, 375, 512)
            up.CDS_SetAngle(8, 189, 512)
            up.CDS_SetAngle(9, 512, 512)
            up.CDS_SetAngle(10, 512, 512)

            time.sleep(0.3)
            up.CDS_SetAngle(1, 440, 302)
            up.CDS_SetAngle(2, 195, 300)
            up.CDS_SetAngle(3, 649, 302)
            up.CDS_SetAngle(4, 196, 300)
            up.CDS_SetAngle(5, 359, 302)
            up.CDS_SetAngle(6, 190, 300)
            up.CDS_SetAngle(7, 675, 908)
            up.CDS_SetAngle(8, 512, 978)
            up.CDS_SetAngle(9, 512, 300)
            up.CDS_SetAngle(10, 512, 300)

            time.sleep(0.3)
            up.CDS_SetAngle(1, 440, 300)
            up.CDS_SetAngle(3, 649, 300)
            up.CDS_SetAngle(5, 359, 300)
            up.CDS_SetAngle(7, 675, 300)
            up.CDS_SetAngle(8, 189, 978)

            time.sleep(0.3)
            up.CDS_SetAngle(1, 340, 302)
            up.CDS_SetAngle(3, 549, 302)
            up.CDS_SetAngle(5, 659, 908)
            up.CDS_SetAngle(6, 512, 975)
            up.CDS_SetAngle(7, 575, 302)
            up.CDS_SetAngle(8, 189, 300)

            time.sleep(0.3)
            up.CDS_SetAngle(1, 340, 300)
            up.CDS_SetAngle(3, 549, 300)
            up.CDS_SetAngle(6, 190, 975)
            up.CDS_SetAngle(7, 575, 300)

            time.sleep(0.3)
            up.CDS_SetAngle(1, 640, 908)
            up.CDS_SetAngle(2, 512, 960)
            up.CDS_SetAngle(3, 449, 302)
            up.CDS_SetAngle(5, 559, 302)
            up.CDS_SetAngle(6, 190, 300)
            up.CDS_SetAngle(7, 475, 302)

            time.sleep(0.3)
            up.CDS_SetAngle(1, 640, 300)
            up.CDS_SetAngle(2, 195, 960)
            up.CDS_SetAngle(3, 449, 300)
            up.CDS_SetAngle(5, 559, 300)
            up.CDS_SetAngle(7, 475, 300)

            time.sleep(0.3)
            up.CDS_SetAngle(1, 540, 302)
            up.CDS_SetAngle(2, 195, 300)
            up.CDS_SetAngle(3, 749, 908)
            up.CDS_SetAngle(4, 512, 956)
            up.CDS_SetAngle(5, 459, 302)
            up.CDS_SetAngle(7, 375, 302)

            time.sleep(0.3) 
    
            

    





